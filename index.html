<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>작업지시표 - 다담TV</title>
  <link rel="manifest" href="/manifest.json" />
  <meta name="theme-color" content="#2c3e50" />
  <link rel="stylesheet" href="./styles/main.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
</head>
<body onload="handleContentChange()">
  <div class="header-bar">
    <h1>작업지시표</h1>
    <button id="logoutBtn" class="logout-btn">로그아웃</button>
  </div>

  <div id="loginBox" class="box">
    <input type="email" id="email" placeholder="이메일" />
    <input type="password" id="password" placeholder="비밀번호" />
    <button id="loginBtn">로그인</button>
  </div>

  <div id="mainApp" style="display:none">
    <div class="tab" id="tabButtons"></div>

    <div id="sectionInput" class="section box">
      <input type="datetime-local" id="date" />
      <input type="text" id="staff" placeholder="작업자 이름 (,로 구분)" />
      <input type="text" id="client" placeholder="거래처명" />
      <input type="text" id="removeAddr" placeholder="철거주소" />
      <input type="text" id="installAddr" placeholder="설치주소" />
      <input type="text" id="contact" placeholder="고객연락처" />
      <select id="content" onchange="handleContentChange()">
        <option value="">작업내용 선택</option>
        <option value="이전설치">이전설치</option>
        <option value="설치">설치</option>
        <option value="철거">철거</option>
        <option value="철거+보관">철거+보관</option>
        <option value="보관+설치">보관+설치</option>
        <option value="A/S">A/S</option>
      </select>
      <input type="text" id="contentEtc" placeholder="기타 작업내용 입력" style="display:none" />
      <input type="text" id="items" placeholder="작업품목" />
      <input type="text" id="price" placeholder="금액" />
      <textarea id="parts" placeholder="사용부품"></textarea>
      <textarea id="memo" placeholder="비고"></textarea>
      <button id="saveBtn">작업 저장</button>
    </div>

    <div id="sectionList" class="section box">
      <div id="doneSearchBox" style="margin-bottom: 10px; display: none;">
        <input type="date" id="startDateInput" />
        <input type="date" id="endDateInput" />
        <input type="text" id="doneSearchInput" placeholder="검색어 (거래처, 품목 등)" />
      </div>
      <div id="excelExportBox" style="text-align: right; margin-bottom: 10px; display: none;">
        <button onclick="exportDoneToExcel()">엑셀로 내보내기</button>
      </div>
      <div id="taskList"></div>
    </div>

    <!-- ✅ 예약탭 영역 -->
    <div id="sectionReserve" class="section box">
      <div id="reserveFilterBox" style="margin-bottom: 10px; display: flex; gap: 10px;">
        <input type="date" id="reserveStartDate" />
        <input type="date" id="reserveEndDate" />
      </div>
      <div id="reserveList"></div>
    </div>
  </div>

  <script type="module" src="./scripts/auth.js"></script>
  <script type="module" src="./scripts/tasks.js"></script>
  <script type="module" src="./scripts/export.js"></script>
</body>
</html>
